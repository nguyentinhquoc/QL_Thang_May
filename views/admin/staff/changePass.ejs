<%- include('../../layout/header') %>

<div class="card p-5">
  <h2>Đổi Mật Khẩu</h2>
  <form class="w-50" method="post" action="?_method=Patch" onsubmit="return validatePasswords()">
    <div class="form-group">
      <label for="currentPassword">Mật Khẩu Hiện Tại</label>
      <input type="password" class="form-control" id="currentPassword" name="currentPassword" required>
    </div>
    <div class="form-group">
      <label for="newPassword">Mật Khẩu Mới</label>
      <input type="password" class="form-control" id="newPassword" name="newPassword" oninput="checkPasswordMatch()"required>
    </div>
    <div class="form-group">
      <label for="confirmPassword">Xác Nhận Mật Khẩu Mới</label>
      <input type="password" class="form-control" id="confirmPassword" name="confirmPassword" required oninput="checkPasswordMatch()">
    </div>
    <button type="submit" class="btn btn-primary mt-3">Đổi Mật Khẩu</button>
  </form>
</div>

<script>
  function validatePasswords() {
    const newPassword = document.getElementById('newPassword').value;
    const confirmPassword = document.getElementById('confirmPassword').value;
    if (newPassword !== confirmPassword) {
      toastr.error('Mật khẩu mới và xác nhận mật khẩu không khớp.');
      return false;
    }
    return true;
  }

  function checkPasswordMatch() {
    const newPassword = document.getElementById('newPassword').value;
    const confirmPassword = document.getElementById('confirmPassword').value;
    if (newPassword !== confirmPassword) {
      document.getElementById('newPassword').style.borderColor = 'red';
      document.getElementById('confirmPassword').style.borderColor = 'red';
    } else {
      document.getElementById('newPassword').style.borderColor = 'green';
      document.getElementById('confirmPassword').style.borderColor = 'green';
    }
  }
</script>
<%- include('../../layout/footer') %>